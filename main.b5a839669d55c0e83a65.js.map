{"version":3,"sources":["webpack:///./news-service.js","webpack:///./photo-service.js","webpack:///./tamplates/cardPhoto.hbs"],"names":["NewServiceApi","this","searchQuery","page","fetchImages","fetch","BASE_URL","then","res","json","hits","resetPage","newQuery","refs","formEl","document","querySelector","containerEl","searchBtnEl","loadMoreBtn","pageNumberEl","modalEl","newsServiceApi","NewsServiceApi","appendImagesMarkUp","insertAdjacentHTML","tamplate","addEventListener","throttle","e","query","target","value","innerHTML","localName","style","display","bigImg","setAttribute","dataset","newsrc","classList","add","width","appendChild","createElement","window","console","log","key","removeChild","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","hooks","helperMissing","nullContext","stack1","program","noop"],"mappings":"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","file":"main.b5a839669d55c0e83a65.js","sourcesContent":["export default class NewServiceApi {\r\n    constructor() {\r\n        this.searchQuery = \"\";\r\n        this.page = 1;\r\n    }\r\n\r\n    fetchImages() {\r\n        const BASE_URL = 'https://pixabay.com/api/';\r\n        const KEY = '21338809-8e79b9b5850d2aac12371ada0';\r\n        \r\n       return fetch(\r\n            `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${KEY}`\r\n        )\r\n            .then(res => res.json())\r\n            .then(({hits}) => {\r\n                this.page += 1\r\n                return hits;\r\n            });\r\n        \r\n    }\r\n\r\n    resetPage() {\r\n        this.page = 1;\r\n    }\r\n\r\n    get query() {\r\n        return this.searchQuery;\r\n    }\r\n\r\n    set query(newQuery) {\r\n        this.searchQuery = newQuery;\r\n    }\r\n}","import { throttle } from \"lodash\";\r\nimport tamplate from './tamplates/cardPhoto.hbs';\r\nimport NewsServiceApi from './news-service';\r\n\r\nconst refs = {\r\n    formEl: document.querySelector('#search-form'),\r\n    containerEl: document.querySelector('.gallery'),\r\n    searchBtnEl: document.querySelector('.search-btn'),\r\n    loadMoreBtn: document.querySelector('.load-more_btn'),\r\n    pageNumberEl: document.querySelector('.page-number'),\r\n    modalEl: document.querySelector('.modal'), \r\n};\r\n\r\nconst newsServiceApi = new NewsServiceApi();\r\n\r\nrefs.formEl.addEventListener('input', throttle(inputValue, 1000));\r\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\r\n\r\nfunction inputValue(e) {\r\n    newsServiceApi.query = e.target.value;\r\n    \r\n    clearImagesContainer();\r\n    newsServiceApi.resetPage();\r\n    newsServiceApi.fetchImages().then(appendImagesMarkUp);\r\n};\r\n\r\nfunction onLoadMore() {\r\n    newsServiceApi.fetchImages().then(appendImagesMarkUp);\r\n};\r\n\r\nfunction appendImagesMarkUp(hits) {\r\n    refs.containerEl.insertAdjacentHTML('beforeend', tamplate(hits));\r\n};\r\n\r\nfunction clearImagesContainer() {\r\n    refs.containerEl.innerHTML = '';\r\n}\r\n\r\n\r\n\r\n// Modal Window =================================================================================\r\nrefs.containerEl.addEventListener('click',  onClickModal)\r\n\r\nconst bigImg = document.createElement('img');\r\n\r\nfunction onClickModal(e) {\r\n    if (e.target.localName === 'img') {\r\n        refs.modalEl.style.display = 'block';\r\n\r\n        bigImg.setAttribute('src', e.target.dataset.newsrc);\r\n        bigImg.classList.add('modal-img');\r\n        bigImg.style.width = '700px'\r\n        refs.modalEl.appendChild(bigImg);\r\n    }\r\n};\r\n\r\nwindow.addEventListener('keydown', (e) => {\r\n    console.log(e.key);\r\n    if (e.key === 'Escape') {\r\n        refs.modalEl.style.display = 'none';\r\n        refs.modalEl.removeChild(bigImg);\r\n    }\r\n});\r\n\r\nrefs.modalEl.addEventListener('click', (e) => {\r\n    if (e.target.localName !== 'img') {\r\n        refs.modalEl.style.display = 'none';\r\n        refs.modalEl.removeChild(bigImg);\r\n    }\r\n});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <div class=\\\"card-wrapper\\\">\\r\\n        <img src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" data-newsrc=\\\"\"\n    + alias2(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":54},\"end\":{\"line\":4,\"column\":71}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" width=\\\"400\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":4},\"end\":{\"line\":26,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"</div>\";\n},\"useData\":true});"],"sourceRoot":""}